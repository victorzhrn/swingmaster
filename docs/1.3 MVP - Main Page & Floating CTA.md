# SwingMaster Single-View Implementation Plan

## Overview
Transform the app from camera-first with tabs to a single main view with video-primary session cards and a floating action button.

---

## Phase 1: Create MainView Structure (2 hours)

### 1.1 Create New MainView
**File:** `Views/MainView.swift`

**Structure:**
```
MainView
├── ScrollView
│   ├── CoachCard (top)
│   └── SessionsList (video cards)
└── FloatingActionButton (overlay)
```

**Tasks:**
- [ ] Create `MainView.swift` to replace current navigation structure
- [ ] Add `ScrollView` with vertical stack
- [ ] Add placeholder views for each section

### 1.2 Update ContentView Navigation
**File:** `ContentView.swift`

**Tasks:**
- [ ] Remove `Screen` enum states
- [ ] Replace with simple navigation: MainView → AnalysisView
- [ ] Remove tab/camera-first logic
- [ ] Set `MainView` as root view

### 1.3 MainView Layout Example
```swift
struct MainView: View {
    var body: some View {
        ZStack {
            ScrollView {
                VStack(spacing: 16) {
                    ProfileHeader() // "Sarah • USTR 3.5 → 4.0"
                    CoachCard()     // AI insight with mock data
                    
                    // Session cards
                    ForEach(sessions) { session in
                        VideoSessionCard(session: session)
                    }
                }
                .padding(.horizontal)
            }
            
            // Floating button overlay
            FloatingActionButton()
        }
    }
}
```

---

## Phase 2: Build Video-Primary Session Card (3 hours)

### 2.1 Create VideoSessionCard Component
**File:** `Components/VideoSessionCard.swift`

**Features:**
- Large video thumbnail (200pt height)
- Interactive shot dots at bottom
- Minimal info bar: date, score, shot count

**Tasks:**
- [ ] Create card with video thumbnail placeholder
- [ ] Add shot selector dots (max 5 visible)
- [ ] Add info bar with 3 metrics only
- [ ] Wire thumbnail to show different timestamps

### 2.2 Enhance Video Thumbnail Generation
**File:** `Utils/VideoStorage.swift`

**Tasks:**
- [ ] Update `generateThumbnail` to accept timestamp parameter
- [ ] Add caching for generated thumbnails
- [ ] Create method to generate thumbnail at specific shot time

### 2.3 Add Interactivity
**Tasks:**
- [ ] Add tap gesture to dots for shot selection
- [ ] Update thumbnail when dot is tapped
- [ ] Add tap on card to navigate to AnalysisView

---

## Phase 3: Create Minimal Coach Card (1 hour)

### 3.1 Build CoachCard Component
**File:** `Components/CoachCard.swift`

**Structure:**
```
CoachCard (compact, non-expandable for MVP)
├── USTR Rating display
└── AI Insight text
```

**Tasks:**
- [ ] Create simple card with rating and insight
- [ ] Use mock data for now
- [ ] No chat functionality in MVP

---

## Phase 4: Implement Floating Action Button (2 hours)

### 4.1 Create FloatingActionButton
**File:** `Components/FloatingActionButton.swift`

**Tasks:**
- [ ] Create 64pt circular button
- [ ] Position at bottom-right with padding
- [ ] Add shadow and elevation effect

### 4.2 Create Action Modal
**File:** `Components/RecordOptionsModal.swift`

**Options:**
- Record Now → CameraView
- Upload Video → File Picker

**Tasks:**
- [ ] Create modal with 2 options only
- [ ] Wire "Record Now" to existing CameraView
- [ ] Wire "Upload" to existing picker logic
- [ ] Add dismiss gesture

---

## Phase 5: Update Data Flow (2 hours)

### 5.1 Create Session Aggregation
**File:** `Models/SessionSummary.swift`

**Data:**
```swift
struct SessionSummary {
    let averageScore: Float
    let shotBreakdown: [ShotType: Int]
}
```

**Tasks:**
- [ ] Create summary struct
- [ ] Add method to calculate from AnalysisResults
- [ ] Store in AnalysisStore with session

### 5.2 Update SessionStore
**File:** `Managers/SessionStore.swift`

**Tasks:**
- [ ] Load sessions for MainView list
- [ ] Sort by date (newest first)
- [ ] Limit to recent 10 for performance

---

## Phase 6: Wire Everything Together (2 hours)

### 6.1 Connect MainView
**Tasks:**
- [ ] Load sessions from SessionStore
- [ ] Pass sessions to VideoSessionCards
- [ ] Wire card taps to navigate to AnalysisView
- [ ] Connect floating button to modal

### 6.2 Update Navigation Flow
**Flow:**
```
MainView
    ↓ Tap session card
AnalysisView (existing)
    ↓ Back
MainView
    ↓ Tap floating button
RecordOptionsModal
    ↓ Choose option
CameraView or Picker (existing)
    ↓ Complete
ProcessingView (existing)
    ↓ Complete
AnalysisView (existing)
    ↓ Done
MainView (refreshed)
```

**Tasks:**
- [ ] Update navigation in ContentView
- [ ] Ensure smooth transitions
- [ ] Refresh MainView after new session

---

## Phase 7: Polish & Cleanup (1 hour)

### 7.1 Remove Unused Code
**Tasks:**
- [ ] Remove HistoryView (replaced by MainView)
- [ ] Remove tab navigation code
- [ ] Remove camera-first logic

### 7.2 Visual Polish
**Tasks:**
- [ ] Add loading states for thumbnails
- [ ] Add empty state for no sessions
- [ ] Ensure dark mode compatibility
- [ ] Test on different screen sizes

---

## Implementation Order

**Day 1 (4 hours):**
- Phase 1: MainView structure
- Phase 2: Video session card

**Day 2 (4 hours):**
- Phase 3: Coach card
- Phase 4: Floating button
- Phase 5: Data flow

**Day 3 (2 hours):**
- Phase 6: Wire together
- Phase 7: Polish

---

## Key Files to Create

1. `Views/MainView.swift` - New root view
2. `Components/VideoSessionCard.swift` - Video-primary card
3. `Components/CoachCard.swift` - Minimal AI insight
4. `Components/FloatingActionButton.swift` - Record/upload trigger
5. `Components/RecordOptionsModal.swift` - Action chooser
6. `Models/SessionSummary.swift` - Aggregated session data

## Key Files to Modify

1. `ContentView.swift` - Remove tabs, use MainView
2. `Utils/VideoStorage.swift` - Enhanced thumbnail generation
3. `Managers/SessionStore.swift` - Support MainView

## Key Files to Remove

1. `Views/HistoryView.swift` - No longer needed

---

## Success Metrics

- [ ] Single scrollable view with all content
- [ ] Video thumbnails load and display correctly
- [ ] Can tap dots to preview different shots
- [ ] Floating button presents options
- [ ] Navigation flow works smoothly
- [ ] No tabs or complex navigation

---

## MVP Scope (What We're NOT Building)

- ❌ Chat interface (just display insight)
- ❌ Expandable coach card
- ❌ Profile editing
- ❌ Settings screen
- ❌ Social features
- ❌ Detailed analytics
- ❌ Multiple views/tabs

Keep it simple. One view, clear actions, video-focused.